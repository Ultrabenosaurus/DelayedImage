/**
 * master.delayedimage.js
 *
 * Using a `data` attribute, only load images inside an element if that element is actually visible.
 * Checks that the element's `display` is not 'none' or 'hidden' and then loops all `img` tags at any level inside the element.
 *
 * @author      Dan Bennett <naebeth@googlemail.com>
 * @package     DelayedImage
 * @subpackage  master
 * @version     1.0.0
 * @link        https://gist.github.com/dan-bennett/9c6e1f4483ce75293ca6
 * @license     http://opensource.org/licenses/BSD-3-Clause BSD 3-clause
 */
// helpers.searchObj based on http://stackoverflow.com/a/9422931
if("undefined"!=typeof jQuery)window.di_mode="jquery",function(e){e.fn.delayed=function(n){var o=e.extend({imgSrc:"data-delayed-image",display:["none","hidden"],ignore:!1},n),r={searchObj:function(e,n){for(var o in n)if(n[o]===e)return!0;return!1}},i={containers:0,images:0,ignoreContainers:o.ignore?e(o.ignore).length:0,ignoreImages:0,nonDelayedImages:0};return o.ignore&&(o.ignore=e(o.ignore+" img")),this.each(function(n,t){t=e(t),r.searchObj(t.css("display"),o.display)||t.find("img").each(function(n,t){o.ignore!==!1&&r.searchObj(t,o.ignore)?i.ignoreImages++:(t=e(t),""!=t.attr(o.imgSrc)?(i.images++,t.attr("src",t.attr(o.imgSrc))):i.nonDelayedImages++)}),i.containers++})}}(jQuery),"undefined"!=window.console&&(_log="log",console[_log]||(_log=!1),_log&&console[_log]("DelayedImage: jQuery detected, working in plugin mode."));else{window.di_mode="vanilla";var delayed=function(e,n){"object"==typeof e&&(n=e),"object"!=typeof n&&(n={}),"string"==typeof e&&(n.selector=e);var o={};o.selector="string"==typeof n.selector?n.selector:".delayed-image",o.imgSrc="string"==typeof n.imgSrc?n.imgSrc:"data-delayed-image",o.display="string"==typeof n.display?[n.display]:"object"==typeof n.display?n.display:["none","hidden"],o.ignore="string"==typeof n.ignore?n.ignore:!1;var r={searchObj:function(e,n){for(var o in n)if(n[o]===e)return!0;return!1}},i={containers:0,images:0,ignoreContainers:o.ignore?document.querySelectorAll(o.ignore).length:0,ignoreImages:0,nonDelayedImages:0};o.ignore=o.ignore?document.querySelectorAll(o.ignore+" img"):!1;var t=document.querySelectorAll(o.selector);i.containers=t.length;for(var g=i.containers-1;g>=0;g--)if(o.display.indexOf(window.getComputedStyle(t[g],null).getPropertyValue("display"))<0)for(var a=t[g].querySelectorAll("img"),l=a.length-1;l>=0;l--)if(o.ignore&&r.searchObj(a[l],o.ignore))i.ignoreImages++;else{var d=a[l];null!=typeof d.getAttribute(o.imgSrc)&&""!=d.getAttribute(o.imgSrc)?(i.images++,d.setAttribute("src",d.getAttribute(o.imgSrc))):i.nonDelayedImages++}return i};"undefined"!=window.console&&(_log="log",console[_log]||(_log=!1),_log&&console[_log]("DelayedImage: jQuery not detected, defaulting to vanilla mode."))}