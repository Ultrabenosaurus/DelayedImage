/**
 * vanilla.delayedimage.js
 *
 * Using a `data` attribute, only load images inside an element if that element is actually visible.
 * Checks that the element's `display` is not 'none' or 'hidden' and then loops all `img` tags at any level inside the element.
 *
 * @author      Dan Bennett <naebeth@googlemail.com>
 * @package     DelayedImage
 * @subpackage  vanilla
 * @version     1.0.0
 * @link        https://gist.github.com/dan-bennett/9c6e1f4483ce75293ca6
 * @license     http://opensource.org/licenses/BSD-3-Clause BSD 3-clause
 */
// helpers.searchObj based on http://stackoverflow.com/a/9422931
window.di_mode="vanilla";var delayed=function(e,r){"object"==typeof e&&(r=e),"object"!=typeof r&&(r={}),"string"==typeof e&&(r.selector=e);var t={};t.selector="string"==typeof r.selector?r.selector:".delayed-image",t.imgSrc="string"==typeof r.imgSrc?r.imgSrc:"data-delayed-image",t.display="string"==typeof r.display?[r.display]:"object"==typeof r.display?r.display:["none","hidden"],t.ignore="string"==typeof r.ignore?r.ignore:!1;var i={searchObj:function(e,r){for(var t in r)if(r[t]===e)return!0;return!1}},o={containers:0,images:0,ignoreContainers:t.ignore?document.querySelectorAll(t.ignore).length:0,ignoreImages:0,nonDelayedImages:0};t.ignore=t.ignore?document.querySelectorAll(t.ignore+" img"):!1;var n=document.querySelectorAll(t.selector);o.containers=n.length;for(var g=o.containers-1;g>=0;g--)if(t.display.indexOf(window.getComputedStyle(n[g],null).getPropertyValue("display"))<0)for(var l=n[g].querySelectorAll("img"),a=l.length-1;a>=0;a--)if(t.ignore&&i.searchObj(l[a],t.ignore))o.ignoreImages++;else{var s=l[a];null!=typeof s.getAttribute(t.imgSrc)&&""!=s.getAttribute(t.imgSrc)?(o.images++,s.setAttribute("src",s.getAttribute(t.imgSrc))):o.nonDelayedImages++}return o};